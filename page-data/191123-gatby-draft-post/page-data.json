{"componentChunkName":"component---src-templates-blog-post-js","path":"/191123-gatby-draft-post/","result":{"data":{"site":{"siteMetadata":{"title":"Yo Man!","author":"Luca Anceschi"}},"markdownRemark":{"id":"c867c8dd-eb28-51a0-b849-b7ff03157894","excerpt":"GatsbyJS together with Gatsby starter blog represent a marvellous publishing tool. It does definetely lack though the out-of-the-box capability of managing and…","html":"<p><a href=\"https://www.gatsbyjs.org/\">GatsbyJS</a> together with <a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">Gatsby starter blog</a> represent a marvellous publishing tool. It does definetely lack though the <em>out-of-the-box</em> capability of managing and filtering-out blog post with an user defined <em>draft</em> status.</p>\n<p>Checking out over the internet you’ll find various approaches to overcome this limitation.</p>\n<p>the one suggested by <a href=\"https://janosh.io/blog/exclude-drafts-from-production\">Janosh Riebesell</a> is my favourite. It is pretty straightforward and it consists only in adding a single line of code that leverages on <code class=\"language-text\">NODE_ENV</code> environmental variable to <code class=\"language-text\">gatsby-config.js</code> config file:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">ignore<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">production</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">**/draft-*</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Basically it rules out from production build all those filenames with a <code class=\"language-text\">draft-</code> prefix.</p>\n<p>Here you’ll find an excerpt of an edited <code class=\"language-text\">gatsby-config.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token operator\">...</span>\n\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/content/blog</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">blog</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        ignore<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">production</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">**/draft-*</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>As a reference, you’ll find the original <a href=\"https://janosh.io/blog/exclude-drafts-from-production\">Janosh Riebesell</a> post <a href=\"https://janosh.io/blog/exclude-drafts-from-production\">here</a></p>","frontmatter":{"title":"Draft post support in Gatsby how to","date":"November 23, 2019","description":"Adding draft post support to Gatsby starter blog how to"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/191123-gatby-draft-post/","previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello World"}},"next":null}}}